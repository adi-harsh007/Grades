{% extends "base.html" %}
{% block title %}Dashboard - SecureVault{% endblock %}
{% block content %}
<div class="mb-4">
    <h2 class="fw-bold">Welcome, <span
            style="background: linear-gradient(135deg, #6c63ff, #00d2ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">{{
            current_user.full_name or current_user.username }}</span></h2>
    <p class="text-muted">Here's an overview of your account</p>
</div>

<div class="row g-4 mb-5">
    <div class="col-md-4">
        <div class="glass-card stat-card">
            <div class="stat-icon"><i class="bi bi-folder2-open"></i></div>
            <div class="stat-number">{{ current_user.documents | length }}</div>
            <div class="stat-label">Documents</div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="glass-card stat-card">
            <div class="stat-icon"><i class="bi bi-mortarboard"></i></div>
            <div class="stat-number">{{ current_user.grades | length }}</div>
            <div class="stat-label">Subjects</div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="glass-card stat-card">
            <div class="stat-icon"><i class="bi bi-shield-check"></i></div>
            <div class="stat-number">
                <span class="badge badge-role {{ 'badge-admin' if current_user.role == 'admin' else 'badge-user' }}">
                    {{ current_user.role | upper }}
                </span>
            </div>
            <div class="stat-label">Role</div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<h4 class="fw-bold mb-3"><i class="bi bi-lightning-charge me-2"></i>Quick Actions</h4>
<div class="row g-3">
    <div class="col-md-3 col-6">
        <a href="{{ url_for('documents.upload') }}" class="text-decoration-none">
            <div class="glass-card p-3 text-center">
                <i class="bi bi-cloud-arrow-up display-6 mb-2" style="color: var(--accent);"></i>
                <p class="mb-0 fw-500">Upload File</p>
            </div>
        </a>
    </div>
    <div class="col-md-3 col-6">
        {% if current_user.role == 'admin' %}
        <a href="{{ url_for('main.admin_users') }}" class="text-decoration-none">
            <div class="glass-card p-3 text-center">
                <i class="bi bi-people-fill display-6 mb-2" style="color: var(--accent);"></i>
                <p class="mb-0 fw-500">Manage Users</p>
            </div>
        </a>
        {% else %}
        <a href="{{ url_for('main.grades') }}" class="text-decoration-none">
            <div class="glass-card p-3 text-center">
                <i class="bi bi-journal-text display-6 mb-2" style="color: var(--accent);"></i>
                <p class="mb-0 fw-500">View Grades</p>
            </div>
        </a>
        {% endif %}
    </div>
    <div class="col-md-3 col-6">
        <a href="{{ url_for('main.profile') }}" class="text-decoration-none">
            <div class="glass-card p-3 text-center">
                <i class="bi bi-person-gear display-6 mb-2" style="color: var(--accent);"></i>
                <p class="mb-0 fw-500">Edit Profile</p>
            </div>
        </a>
    </div>
    <div class="col-md-3 col-6">
        <a href="{{ url_for('documents.list_documents') }}" class="text-decoration-none">
            <div class="glass-card p-3 text-center">
                <i class="bi bi-share display-6 mb-2" style="color: var(--accent);"></i>
                <p class="mb-0 fw-500">Shared Files</p>
            </div>
        </a>
    </div>
</div>

<!-- Account Info -->
<div class="glass-card p-4 mt-4">
    <h5 class="fw-bold mb-3"><i class="bi bi-info-circle me-2"></i>Account Details</h5>
    <div class="row">
        <div class="col-md-6">
            <p class="mb-1"><span class="text-muted">Username:</span> <strong>{{ current_user.username }}</strong></p>
            <p class="mb-1"><span class="text-muted">Email:</span> <strong>{{ current_user.email }}</strong></p>
        </div>
        <div class="col-md-6">
            <p class="mb-1"><span class="text-muted">Phone:</span> <strong>{{ current_user.phone or 'Not set'
                    }}</strong></p>
            <p class="mb-1"><span class="text-muted">Member since:</span> <strong>{{
                    current_user.created_at.strftime('%b %d, %Y') }}</strong></p>
        </div>
    </div>
</div>
{% endblock %}